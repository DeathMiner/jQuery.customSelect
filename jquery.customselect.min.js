/*!
 * jQuery.customSelect: Simple & lightweight select customizer
 * Version 1.0.0
 * https://github.com/DeathMiner/jQuery.customSelect
 * The MIT License
 * (c) 2014 Death_Miner
 */
(function(c){var d=function(f,e){var g=this;g.$element=c(f);g.options=c.extend({},d.DEFAULTS,e);g.$select=c("<div></div>");g.$select.addClass(g.options.cssClass);g.$select.html(g.options.markup);g.$select.insertAfter(g.$element);g.render();g.$select.on("click",function(h){g.$select.toggleClass("select-open");if(g.$select.hasClass("select-open")){g.$select.find(".select-options li").removeClass("select-hover");g.$select.find(".select-options li[data-opt-id='"+g.currentVal.id+"']").addClass("select-selected")}h.stopPropagation()});c("body").on("click",function(){g.$select.removeClass("select-open")});g.$select.find(".select-options li").on("click",function(){var h=c(this);if(!h.hasClass("select-disabled")){g.val(parseInt(h.attr("data-opt-id"),10));g.$select.find(".select-trigger").focus()}else{return false}}).on("mouseover",function(){g.$select.find(".select-options li").removeClass("select-hover");c(this).addClass("select-hover");g.$select.find(".select-options li[data-opt-id='"+g.currentVal.id+"']").removeClass("select-selected")});if(g.options.keyNav){g.$select.find(".select-trigger").on("focus",function(){g.$select.on("keydown",function(k){if(k.keyCode==38){var h=g.currentVal.value;while(true){var j=g.prevOption(h);if(typeof j!="undefined"){if(j.disabled!==true){g.val(j.id);return false}h=j.value}else{break}}}else{if(k.keyCode==40){var h=g.currentVal.value;while(true){var i=g.nextOption(h);if(typeof i!="undefined"){if(i.disabled!==true){g.val(i.id);return false}h=i.value}else{break}}}else{if(k.keyCode==27||k.keyCode==13){if(g.$select.hasClass("select-open")){g.$select.removeClass("select-open");return false}}}}});g.$select.find(".select-trigger").one("blur",function(){g.$select.off("keydown")})})}};d.VERSION="1.0.0";d.DEFAULTS={cssClass:"custom-select",keyNav:true,markup:"<button type='button' class='select-trigger'></button><div class='select-inner-wrap'><ul class='select-options'></ul></div>",allowHTML:true};d.prototype.render=function(){var e=this;e.selectOptions=[];e.$element.find("option").each(function(){var h=e.selectOptions.length,g={id:h,value:c(this).val(),name:c(this).text(),html:typeof c(this).attr("data-html")!="undefined"?c(this).attr("data-html"):false,disabled:c(this).prop("disabled")};e.selectOptions.push(g);var f=c("<li></li>");f.attr("data-opt-id",g.id);if(g.html){f.html(g.html)}else{f.text(g.name)}if(g.disabled){f.addClass("select-disabled")}f.appendTo(e.$select.find(".select-options"))});e.val(e.$element.val())};d.prototype.searchOptionByKey=function(f){var g=this;for(var e=g.selectOptions.length-1;e>=0;e--){if(g.selectOptions[e].value===f){return g.selectOptions[e]}}};d.prototype.nextOption=function(f){var g=this,f=f||g.currentVal.value;for(var e=g.selectOptions.length-1;e>=0;e--){if(g.selectOptions[e].value===f){return g.selectOptions[e+1]}}};d.prototype.prevOption=function(f){var g=this,f=f||g.currentVal.value;for(var e=g.selectOptions.length-1;e>=0;e--){if(g.selectOptions[e].value===f){return g.selectOptions[e-1]}}};d.prototype.val=function(g){var f=this,e;if(typeof g=="undefined"){return f.currentVal.value}else{if(typeof g=="string"){e=f.searchOptionByKey(g)}else{if(typeof g=="number"){e=f.selectOptions[g]}}}if(e.html){f.$select.find(".select-trigger").html(e.html)}else{f.$select.find(".select-trigger").text(e.name)}f.$element.val(e.value);f.currentVal=e;f.$select.find(".select-options li").removeClass("select-selected").removeClass("select-hover");f.$select.find(".select-options li[data-opt-id='"+e.id+"']").addClass("select-selected")};d.prototype.destroy=function(){var e=this;e.$element.show();e.$select.empty().remove()};function b(e,f){return this.filter("select").each(function(){var i=c(this),h=i.data("customSelect"),g=typeof e=="object"&&e;if(!h){i.data("customSelect",(h=new d(this,g)))}if(e=="render"){h.render()}else{if(e=="val"){h.val(f)}else{if(e=="destroy"){h.destroy()}}}})}var a=c.fn.customSelect;c.fn.customSelect=b;c.fn.customSelect.Constructor=d;c.fn.customSelect.noConflict=function(){c.fn.customSelect=a;return this}})(jQuery);
